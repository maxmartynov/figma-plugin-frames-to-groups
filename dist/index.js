(()=>{"use strict";var e,t,n;!function(e){e.yes="yes",e.no="no"}(e||(e={})),function(e){e.remove="remove",e.turnIntoRectangle="turnIntoRectangle"}(t||(t={})),function(e){e.leaveFrame="leaveFrame",e.turnIntoGroup="turnIntoGroup"}(n||(n={}));const r={createRectangleForFrame:e.yes,emptyFrames:t.remove,rootFrame:n.leaveFrame,convertInnerFrames:e.yes},o=figma.currentPage,s=o.selection,a=figma.root;function i(e){switch(e){case"view:settings":figma.showUI(__html__,{width:295,height:285}),figma.ui.postMessage({type:e,settings:c()},{origin:"*"});break;case"view:about":figma.showUI(__html__,{width:320,height:460}),figma.ui.postMessage({type:e},{origin:"*"})}figma.ui.onmessage=e=>{"message"===e.type&&e.text?figma.notify(e.text||""):"cancel"!==e.type?"save:settings"!==e.type?figma.closePlugin():function(e){const t=Object.assign(r,e);for(const e of Object.keys(r)){let n=String(t[e]);"undefined"===n&&(n=""),a.setPluginData(e,n)}}(e.settings):figma.closePlugin()}}function c(){const e=e=>{const t=a.getPluginData(e);if("undefined"!==String(t))return t||void 0};return{createRectangleForFrame:e("createRectangleForFrame")||r.createRectangleForFrame,emptyFrames:e("emptyFrames")||r.emptyFrames,rootFrame:e("rootFrame")||r.rootFrame,convertInnerFrames:e("convertInnerFrames")||r.convertInnerFrames}}function g(t,n){if(!t||!t.parent)return null;if(!Array.isArray(t.children)||!t.children.length)return null;const r=t.parent;if("INSTANCE"===r.type)return null;const o=figma.group(t.children,r);if(t.name&&(o.name=t.name),n.createRectangleForFrame===e.yes){let e=!1;const n=figma.createRectangle();"number"==typeof t.cornerRadius&&t.cornerRadius>0?(e=!0,n.cornerRadius=t.cornerRadius):(t.topLeftRadius||t.topRightRadius||t.bottomLeftRadius||t.bottomRightRadius)&&(e=!0,n.topLeftRadius=t.topLeftRadius||0,n.topRightRadius=t.topRightRadius||0,n.bottomLeftRadius=t.bottomLeftRadius||0,n.bottomRightRadius=t.bottomRightRadius||0),t.fills&&Array.isArray(t.fills)&&t.fills.length>0&&(e=!0,n.fills=JSON.parse(JSON.stringify(t.fills))),t.strokes&&Array.isArray(t.strokes)&&t.strokes.length>0&&(e=!0,n.strokes=JSON.parse(JSON.stringify(t.strokes)),n.strokeWeight=t.strokeWeight,n.strokeAlign=t.strokeAlign,n.strokeCap=t.strokeCap,n.strokeJoin=t.strokeJoin,n.dashPattern=t.dashPattern),e?(n.name=t.name?`${t.name} Background`:"Frame Background",n.resize(t.width,t.height),n.x=t.x,n.y=t.y,o.insertChild(0,n)):n.remove()}return o}function u(t,r){const o=[];if(!t.length)return o;for(const s of t)if("function"==typeof s.findAll){if(r.convertInnerFrames===e.yes){const e=s.findAll((e=>"FRAME"===e.type));for(const t of e){const e=g(t,r);e&&(o.push(e),t.children.length||t.remove())}}if("FRAME"===s.type&&r.rootFrame===n.turnIntoGroup){const e=g(s,r);e&&(o.push(e),s.children.length||s.remove())}}return o}!function(){switch(figma.command){case"convertFramesToGroups":return function(){const e=c(),t=u(s.length?s:o.children,e);figma.closePlugin(t.length?`${t.length} Frame(s) converted`:"There are no Frames to convert")}();case"convertRootFrameToGroup":return function(){const t=c(),r=u(s.length?s:o.children,Object.assign(Object.assign({},t),{rootFrame:n.turnIntoGroup,convertInnerFrames:e.no}));figma.closePlugin(r.length?`${r.length} Frame(s) converted`:"There are no Frames to convert")}();case"view:settings":return i("view:settings");case"view:about":return i("view:about");default:figma.closePlugin("ERROR: Unknown command")}}()})();