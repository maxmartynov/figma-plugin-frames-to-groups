(()=>{"use strict";var e,t,n;!function(e){e.yes="yes",e.no="no"}(e||(e={})),function(e){e.remove="remove",e.turnIntoRectangle="turnIntoRectangle"}(t||(t={})),function(e){e.leaveFrame="leaveFrame",e.turnIntoGroup="turnIntoGroup"}(n||(n={}));const r={createRectangleForFrame:e.no,emptyFrames:t.remove,rootFrame:n.leaveFrame},o=figma.currentPage,i=o.selection,a=figma.root;function s(e){switch(e){case"view:settings":figma.showUI(__html__,{width:295,height:285}),figma.ui.postMessage({type:e,settings:c()},{origin:"*"});break;case"view:about":figma.showUI(__html__,{width:320,height:460}),figma.ui.postMessage({type:e},{origin:"*"})}figma.ui.onmessage=e=>{"message"===e.type&&e.text?figma.notify(e.text||""):"cancel"!==e.type?"save:settings"!==e.type?figma.closePlugin():function(e){const t=Object.assign(r,e);for(const e of Object.keys(r))a.setPluginData(e,String(t[e]))}(e.settings):figma.closePlugin()}}function c(){const e=e=>a.getPluginData(e);return Object.assign(r,{createRectangleForFrame:e("createRectangleForFrame"),emptyFrames:e("emptyFrames"),rootFrame:e("rootFrame")})}function g(e){if(!e||!e.parent)return null;if(!Array.isArray(e.children)||!e.children.length)return null;const t=e.parent;if("INSTANCE"===t.type)return null;const n=figma.group(e.children,t);return e.name&&(n.name=e.name),n}!function(){switch(figma.command){case"convertFramesToGroups":return function(){const e=c(),t=function(e,t){const r=[];if(!e.length)return r;for(const o of e){if("function"!=typeof o.findAll)continue;const e=o.findAll((e=>"FRAME"===e.type));for(const t of e){const e=g(t);e&&(r.push(e),t.children.length||t.remove())}if("FRAME"===o.type&&t.rootFrame===n.turnIntoGroup){const e=g(o);e&&(r.push(e),o.children.length||o.remove())}}return r}(i.length?i:o.children,e);figma.closePlugin(t.length?`${t.length} Frame(s) converted`:"There are no Frames to convert")}();case"view:settings":return s("view:settings");case"view:about":return s("view:about");default:figma.closePlugin("ERROR: Unknown command")}}()})();