(()=>{"use strict";var e,t,r;!function(e){e.yes="yes",e.no="no"}(e||(e={})),function(e){e.auto="auto",e.remove="remove",e.turnIntoRectangle="turnIntoRectangle"}(t||(t={})),function(e){e.leaveFrame="leaveFrame",e.turnIntoGroup="turnIntoGroup"}(r||(r={}));const n={createRectangleForFrame:e.yes,childlessFrames:t.auto,rootFrame:r.leaveFrame,convertInnerFrames:e.yes},o=figma.currentPage,i=o.selection,s=figma.root;function a(e){switch(e){case"view:settings":figma.showUI(__html__,{width:295,height:320}),figma.ui.postMessage({type:e,settings:l()},{origin:"*"});break;case"view:about":figma.showUI(__html__,{width:320,height:460}),figma.ui.postMessage({type:e},{origin:"*"})}figma.ui.onmessage=e=>{"message"===e.type&&e.text?figma.notify(e.text||""):"cancel"!==e.type?"save:settings"!==e.type?"view:about"!==e.type?"view:settings"!==e.type?figma.closePlugin():a("view:settings"):a("view:about"):function(e){const t=Object.assign(n,e);for(const e of Object.keys(n)){let r=String(t[e]);"undefined"===r&&(r=""),s.setPluginData(e,r)}}(e.settings):figma.closePlugin()}}function l(){const e=e=>{const t=s.getPluginData(e);if("undefined"!==String(t))return t||void 0};return{createRectangleForFrame:e("createRectangleForFrame")||n.createRectangleForFrame,childlessFrames:e("childlessFrames")||n.childlessFrames,rootFrame:e("rootFrame")||n.rootFrame,convertInnerFrames:e("convertInnerFrames")||n.convertInnerFrames}}function c(r,n){if(!r||!r.parent)return null;if(!(Array.isArray(r.children)&&r.children.length||n.childlessFrames!==t.remove))return null;const o=r.parent;if("INSTANCE"===o.type)return null;let i=null;if(n.createRectangleForFrame===e.yes){let e=!1;const t=figma.createRectangle();"number"==typeof r.cornerRadius&&r.cornerRadius>0?(e=!0,t.cornerRadius=r.cornerRadius):(r.topLeftRadius||r.topRightRadius||r.bottomLeftRadius||r.bottomRightRadius)&&(e=!0,t.topLeftRadius=r.topLeftRadius||0,t.topRightRadius=r.topRightRadius||0,t.bottomLeftRadius=r.bottomLeftRadius||0,t.bottomRightRadius=r.bottomRightRadius||0),r.cornerSmoothing&&(e=!0,t.cornerSmoothing=r.cornerSmoothing),r.fills&&Array.isArray(r.fills)&&r.fills.length>0&&(e=!0,t.fills=JSON.parse(JSON.stringify(r.fills))),r.fillStyleId&&(e=!0,t.setFillStyleIdAsync(String(r.fillStyleId))),r.strokes&&Array.isArray(r.strokes)&&r.strokes.length>0&&(e=!0,t.strokes=JSON.parse(JSON.stringify(r.strokes)),t.strokeWeight=r.strokeWeight,t.strokeAlign=r.strokeAlign,t.strokeCap=r.strokeCap,t.strokeJoin=r.strokeJoin,t.strokeMiterLimit=r.strokeMiterLimit,t.dashPattern=r.dashPattern),r.strokeStyleId&&(e=!0,t.setStrokeStyleIdAsync(r.strokeStyleId)),r.effects&&Array.isArray(r.effects)&&r.effects.length>0&&(e=!0,t.effects=JSON.parse(JSON.stringify(r.effects))),r.effectStyleId&&(e=!0,t.setEffectStyleIdAsync(r.effectStyleId)),e?(t.name=r.name?`${r.name} Background`:"Frame Background",t.resize(r.width,r.height),t.x=r.x,t.y=r.y,t.rotation=r.rotation,t.layoutAlign=r.layoutAlign,t.layoutGrow=r.layoutGrow,t.visible=r.visible,t.locked=r.locked,t.opacity=r.opacity,t.blendMode=r.blendMode,t.isMask=r.isMask,r.children.length?(i=figma.group(r.children,o),i.insertChild(0,t)):(t.x=0,t.y=0,t.rotation=0,r.insertChild(0,t),i=figma.group(r.children,o)),r.name&&(i.name=r.name)):t.remove()}return i}function g(t,n){const o=[];if(!t.length)return o;for(const i of t)if("function"==typeof i.findAll){if(n.convertInnerFrames===e.yes){const e=i.findAll((e=>"FRAME"===e.type));for(const t of e){const e=c(t,n);e&&o.push(e),t.remove()}}if("FRAME"===i.type&&n.rootFrame===r.turnIntoGroup){const e=c(i,n);e&&(o.push(e),i.children.length||i.remove())}}return o}!function(){switch(figma.command){case"convertFramesToGroups":return function(){const e=l(),t=g(i.length?i:o.children,e);figma.closePlugin(t.length?`${t.length} Frame(s) converted`:"There are no Frames to convert or they are empty")}();case"convertRootFrameToGroup":return function(){const t=l(),n=g(i.length?i:o.children,Object.assign(Object.assign({},t),{rootFrame:r.turnIntoGroup,convertInnerFrames:e.no}));figma.closePlugin(n.length?`${n.length} Frame(s) converted`:"There are no Frames to convert")}();case"view:settings":return a("view:settings");case"view:about":return a("view:about");default:figma.closePlugin("ERROR: Unknown command")}}()})();