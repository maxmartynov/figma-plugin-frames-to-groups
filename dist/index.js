(()=>{"use strict";var e,n,t;!function(e){e.yes="yes",e.no="no"}(e||(e={})),function(e){e.remove="remove",e.turnIntoRectangle="turnIntoRectangle"}(n||(n={})),function(e){e.leaveFrame="leaveFrame",e.turnIntoGroup="turnIntoGroup"}(t||(t={}));const r={createRectangleForFrame:e.no,emptyFrames:n.remove,rootFrame:t.leaveFrame,convertInnerFrames:e.yes},o=figma.currentPage,a=o.selection,s=figma.root;function i(e){switch(e){case"view:settings":figma.showUI(__html__,{width:295,height:285}),figma.ui.postMessage({type:e,settings:c()},{origin:"*"});break;case"view:about":figma.showUI(__html__,{width:320,height:460}),figma.ui.postMessage({type:e},{origin:"*"})}figma.ui.onmessage=e=>{"message"===e.type&&e.text?figma.notify(e.text||""):"cancel"!==e.type?"save:settings"!==e.type?figma.closePlugin():function(e){const n=Object.assign(r,e);for(const e of Object.keys(r))s.setPluginData(e,String(n[e]))}(e.settings):figma.closePlugin()}}function c(){const e=e=>s.getPluginData(e)||void 0;return{createRectangleForFrame:e("createRectangleForFrame")||r.createRectangleForFrame,emptyFrames:e("emptyFrames")||r.emptyFrames,rootFrame:e("rootFrame")||r.rootFrame,convertInnerFrames:e("convertInnerFrames")||r.convertInnerFrames}}function m(e){if(!e||!e.parent)return null;if(!Array.isArray(e.children)||!e.children.length)return null;const n=e.parent;if("INSTANCE"===n.type)return null;const t=figma.group(e.children,n);return e.name&&(t.name=e.name),t}function g(n,r){const o=[];if(!n.length)return o;for(const a of n)if("function"==typeof a.findAll){if(console.log("settings.convertInnerFrames: ",r.convertInnerFrames),r.convertInnerFrames===e.yes){const e=a.findAll((e=>"FRAME"===e.type));for(const n of e){const e=m(n);e&&(o.push(e),n.children.length||n.remove())}}if("FRAME"===a.type&&r.rootFrame===t.turnIntoGroup){const e=m(a);e&&(o.push(e),a.children.length||a.remove())}}return o}!function(){switch(figma.command){case"convertFramesToGroups":return function(){const e=c(),n=g(a.length?a:o.children,e);figma.closePlugin(n.length?`${n.length} Frame(s) converted`:"There are no Frames to convert")}();case"convertRootFrameToGroup":return function(){const n=c(),r=g(a.length?a:o.children,Object.assign(Object.assign({},n),{rootFrame:t.turnIntoGroup,convertInnerFrames:e.no}));figma.closePlugin(r.length?`${r.length} Frame(s) converted`:"There are no Frames to convert")}();case"view:settings":return i("view:settings");case"view:about":return i("view:about");default:figma.closePlugin("ERROR: Unknown command")}}()})();